Thank you for installing {{ .Chart.Name }}.

Your release is named {{ .Release.Name }}.

To learn more about the release, try:

  $ helm status --namespace {{ .Release.Namespace }} {{ .Release.Name }}
  $ helm get all --namespace {{ .Release.Namespace }} {{ .Release.Name }}

StackRox MCP Server Configuration:
-----------------------------------

1. The server is configured to connect to: {{ .Values.config.central.url }}

2. Enabled tools:
   - Vulnerability Management: {{ .Values.config.tools.vulnerability.enabled | ternary "ENABLED" "DISABLED" }}
   - Configuration Manager: {{ .Values.config.tools.configManager.enabled | ternary "ENABLED" "DISABLED" }}

3. The service is available at:
   Kubernetes service: {{ include "stackrox-mcp.fullname" . }}.{{ .Release.Namespace }}:{{ .Values.service.port }}
{{- if eq (include "stackrox-mcp.isOpenshift" .) "true" }}
   Openshift route: kubectl get route --namespace {{ .Release.Namespace }} {{ include "stackrox-mcp.fullname" . }}
{{- end }}

To test connectivity:
  $ kubectl run -i --tty --rm debug --image=curlimages/curl --restart=Never -- \
    curl -k {{ include "stackrox-mcp.portName" . }}://{{ include "stackrox-mcp.fullname" . }}.{{ .Release.Namespace }}:{{ .Values.service.port }}/health

{{- if and (eq (include "stackrox-mcp.isOpenshift" .) "true") .Values.config.server.TLSEnabled (ne .Values.openshift.route.tls.termination "reencrypt") }}

WARN: OpenShift route TLS termination should be set to "reencrypt" if TLS encryption is enabled. You should set ".openshift.route.tls.termination" to "reencrypt".
{{- end }}

{{- if .Values.config.server.TLSEnabled }}

TLS Configuration:
  Secret Name: {{ include "stackrox-mcp.tlsSecretName" . }}
  {{- if .Values.tlsSecret.existingSecretName }}
  Status: Using existing secret "{{ .Values.tlsSecret.existingSecretName }}"
  {{- else }}
  Status: Generated secret with provided certificates
  {{- end }}
{{- end }}
